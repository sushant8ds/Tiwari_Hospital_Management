# Render Deployment Guide

## Post-Deployment Steps

After your service is deployed on Render, follow these steps to initialize the database:

### 1. Access Render Shell

1. Go to your service dashboard on Render
2. Click on the **"Shell"** tab in the left sidebar
3. Wait for the shell to connect

### 2. Initialize Database

Run the initialization script:

```bash
python init_render_db.py
```

This script will:
- Create all database tables
- Add 5 doctors to the system
- Add 20 beds across 4 wards
- Skip if data already exists

### 3. Verify Deployment

Visit your deployed URL and check:
- ✅ Dashboard loads correctly
- ✅ New OPD page shows doctors in dropdown
- ✅ Patient registration works
- ✅ Billing system functions
- ✅ IPD admission shows available beds

## Hospital Information

- **Name**: Tiwari Hospital
- **Address**: Tamkuhi Raj, Kushinagar, Uttar Pradesh - 274407
- **Phone**: Update in Render environment variables

## Data Backup

The system includes automatic audit trails for all operations:
- All patient visits are logged
- All payments are recorded
- All admissions/discharges are tracked
- Audit trail maintains complete history

### Manual Backup

To create a manual backup via Shell:

```bash
# Copy database file
cp hospital.db hospital_backup_$(date +%Y%m%d).db

# List backups
ls -lh hospital_backup_*.db
```

## Troubleshooting

### Doctors not showing in OPD

1. Check if database is initialized:
   ```bash
   python init_render_db.py
   ```

2. Verify doctors exist:
   ```bash
   python -c "import asyncio; from init_render_db import *; asyncio.run(init_database())"
   ```

### Database Issues

If you need to reset the database:

```bash
# Backup first!
cp hospital.db hospital_backup.db

# Reinitialize
python init_render_db.py
```

## Environment Variables

Make sure these are set in Render:

```
DATABASE_URL=sqlite+aiosqlite:///./hospital.db
SECRET_KEY=<auto-generated>
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
ENVIRONMENT=production
HOSPITAL_NAME=Tiwari Hospital
HOSPITAL_ADDRESS=Tamkuhi Raj, Kushinagar, Uttar Pradesh - 274407
HOSPITAL_PHONE=+91-XXXXXXXXXX
HOSPITAL_LOGO_PATH=static/images/hospital_logo.png
DEFAULT_PRINTER_TYPE=thermal
THERMAL_PRINTER_WIDTH=58
A4_PRINTER_NAME=default
```

## Support

For issues, check:
1. Render logs (Logs tab)
2. Shell access for manual commands
3. Database initialization status
